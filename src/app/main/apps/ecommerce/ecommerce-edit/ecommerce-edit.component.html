<div class="content-wrapper">
  <app-content-header [contentHeader]="contentHeader"></app-content-header>
  <div class="content-body">
      <section class="app-ecommerce-edit">
    <ng-container *ngFor="let row of rows">
      <div class="card" *ngIf="row.id == urlLastValue">
        <div class="card-body">
          <ul ngbNav #nav="ngbNav" class="nav nav-pills">
            <li ngbNavItem>
              <a ngbNavLink class="d-flex align-items-center"
                ><i data-feather="gift" class="mr-sm-50"></i><span class="d-none d-sm-block">Product</span></a
              >
              <ng-template ngbNavContent>
                <!-- Account Tab starts -->
                <div class="tab-pane active" id="account" aria-labelledby="account-tab" role="tabpanel">
                  <!-- users edit media object start -->
                  <div class="media mb-2">
                    <div *ngIf="row.image.length > 0">
                      <img
                        class="user-avatar users-avatar-shadow rounded mr-2 my-25 cursor-pointer"
                        [src]="row.image"
                        height="150"
                        width="150"
                        alt="Image product"
                        id="imgProduct"
                      />
                    </div>
                    <div class="media-body mt-50">
                      <h4>{{ row.name }}</h4>
                      <div class="col-12 d-flex mt-1 px-0">
                        <label class="btn btn-primary mr-75 mb-0" for="change-picture">
                          <span class="d-none d-sm-block">Change</span>
                          <input
                            class="form-control"
                            type="file"
                            id="change-picture"
                            hidden
                            accept="image/png, image/jpeg, image/jpg"
                            [(ngModel)]="image"
                            (change)="upload($event)"
                          />
                          <span class="d-block d-sm-none">
                            <i class="mr-0" data-feather="edit"></i>
                          </span>
                        </label>
                        <button class="btn btn-outline-secondary d-block d-sm-none">
                          <i class="mr-0" data-feather="trash-2"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <!-- users edit media object ends -->
                  <!-- users edit account form start -->
                  <form  #updateForm="ngForm" class="form-validate"  (ngSubmit)="update(updateForm)" cForm >
                    <div class="row">
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="name">Name Product</label>
                          <input
                            type="text"
                            class="form-control"
                            placeholder="Name Product"
                            name="name"
                            id="name"
                            [(ngModel)]="row.name"
                            [class.error]="updateForm.submitted && nameProductRef.invalid"
                            #nameProductRef="ngModel"
                            required
                          />
                          <span *ngIf="updateForm.submitted || nameProductRef.touched" class="invalid-form">
                            <small class="form-text text-danger" *ngIf="nameProductRef.errors?.required">Name product is required!</small>
                          </span>
                        </div>
                      </div>

                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="price">Price</label>
                          <input
                            type="number"
                            class="form-control"
                            placeholder="price"
                            name="price"
                            id="price"
                            [(ngModel)]="row.price"
                            [class.error]="updateForm.submitted && priceRef.invalid"
                            #priceRef="ngModel"
                            [pattern]="pricePtn"
                            required
                          />
                          <span *ngIf="updateForm.submitted || priceRef.touched" class="invalid-form">
                            <small class="form-text text-danger" *ngIf="priceRef.errors?.required">Price is required!</small>
                          </span>
                          <span *ngIf="updateForm.submitted || priceRef.touched" class="invalid-form">
                            <small class="form-text text-danger" *ngIf="priceRef.errors?.pattern">Price is positive</small>
                          </span>
                        </div>
                      </div>

                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="quantity">Quantity</label>
                          <input
                            type="number"
                            class="form-control"
                            placeholder="quantity"
                            [(ngModel)]="row.quantity"
                            name="quantity"
                            id="quantity"
                            [class.error]="updateForm.submitted && quantityRef.invalid"
                            #quantityRef="ngModel"
                            [pattern]="quantityPtn"
                            required
                          />
                          <span *ngIf="updateForm.submitted || quantityRef.touched" class="invalid-form">
                            <small class="form-text text-danger" *ngIf="quantityRef.errors?.required">Quantity is required!</small>
                          </span>
                          <span *ngIf="updateForm.submitted || quantityRef.touched" class="invalid-form">
                            <small class="form-text text-danger" *ngIf="quantityRef.errors?.pattern">Quantity is positive integer.</small>
                          </span>
                        </div>
                      </div>

                      <!-- <div class="col-md-4">
                          <div class="form-group">
                            <label for="expire">Expire</label>
                            <input id="expire"
                            type="datetime-local"
                            class="form-control"
                            placeholder="expire"
                            name="expire"
                            [(ngModel)]="row.expire"/>
                          </div>
                        </div> -->

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="category">Category</label>
                            <select id="categoryId" name="categoryId" class="form-control" (change)="onChangeCategory($event)"
                            (onload)="GetBrand(row.categoryId)" required >
                          <option name="categoryId" *ngFor="let c of categories" value ="{{c.id}}" [selected]="c.id===row.categoryId"
                          [(ngModel)]="row.categoryId">{{c.name}}</option>
                        </select>
                          </div>
                      </div>

                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="brand">Brand</label>
                          <select id="brandId" name="brandId" class="form-control" (change)="onChangeBrand($event)" required>
                            <option name="brandId" *ngFor="let b of brandtemp" value ="{{b.id}}" [selected]="b.id===row.brandId" [(ngModel)]="row.brandId">{{b.name}}</option>
                          </select>
                        </div>
                      </div>

                      <div class="col-md-12">
                        <div class="form-group">
                          <label for="description">Description</label>
                          <textarea
                            type="text"
                            class="form-control"
                            placeholder="description"
                            [(ngModel)]="row.description"
                            name="description"
                            rows="4"
                            id="description"
                            [class.error]="updateForm.submitted && descriptionRef.invalid"
                            #descriptionRef="ngModel"
                            required
                          ></textarea>
                          <span *ngIf="updateForm.submitted || descriptionRef.touched" class="invalid-form">
                            <small class="form-text text-danger" *ngIf="descriptionRef.errors?.required">Description is required!</small>
                          </span>
                        </div>
                      </div>
                      <div class="col-12 d-flex flex-sm-row flex-column mt-2">
                        <button type="submit" class="btn btn-primary mb-1 mb-sm-0 mr-0 mr-sm-1"rippleEffect>
                          Save Changes
                        </button>
                        <button type="reset" class="btn btn-outline-secondary" rippleEffect>Reset</button>
                      </div>
                    </div>
                  </form>
                  <!-- users edit account form ends -->
                </div>
                <!-- Account Tab ends -->
              </ng-template>
            </li>
          </ul>
          <div [ngbNavOutlet]="nav" class="mt-2"></div>
        </div>
      </div>
    </ng-container>
  </section>
  </div>
</div>
