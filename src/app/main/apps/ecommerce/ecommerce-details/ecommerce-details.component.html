<div class="content-wrapper">
  <app-content-header [contentHeader]="contentHeader"></app-content-header>
  <div class="content-body">
    <!-- app e-commerce details start -->
    <section class="app-ecommerce-details">
      <div class="card">
        <!-- Product Details starts -->
        <div class="card-body">
          <div class="row my-2">
            <div class="col-12 col-md-5 d-flex align-items-center justify-content-center mb-2 mb-md-0">
              <div class="d-flex align-items-center justify-content-center">
                <img [src]="selectedProduct.image" class="img-fluid product-img" alt="product image" />
              </div>
            </div>
            <div class="col-12 col-md-7">
              <h4>{{ selectedProduct.name }}</h4>
              <span class="card-text item-company"
                >By <a href="javascript:void(0)" class="company-name">{{ selectedProduct.brand.name }}</a></span
              >
              <div class="ecommerce-details-price d-flex flex-wrap mt-1">
                <h4 class="item-price mr-1">${{ selectedProduct.price }}</h4>
                <div class="rating rating-sm pl-1 border-left mb-1">
                  <!-- <ngb-rating [(rate)]="rating" [max]="5" class="outline-none">
                    <ng-template let-fill="fill" let-index="index">
                      <span class="fa fa-star-o mr-25" [class.fa-star]="fill ===100">
                      </span>
                    </ng-template> 
                  </ngb-rating>
                  {{rating}}<br/> -->

                  <ng-template #t let-fill="fill">
                    <span class="star" [class.full]="fill === 100">
                      <span class="half" [style.width.%]="fill"><em class="fa fa-star text-warning"></em></span><em class="fa fa-star-o text-warning cursor"></em>
                    </span>
                  </ng-template>
                  
                  <ngb-rating [(rate)]="selectedProduct.rating" [starTemplate]="t" [readonly]="true" max="5"></ngb-rating>
                  <span style="font-size: medium;">  {{selectedProduct.rating}}/5 - {{selectedProduct.amountRating}} rating- {{selectedProduct.view}} viewers</span>
                </div>
              </div>
              <p class="card-text">Available - <span class="text-success">{{ selectedProduct.quantity }}</span></p>
              <p class="card-text">
                {{ selectedProduct.description }}
              </p>
              <ul class="product-features list-unstyled">
                <li *ngIf="selectedProduct.hasFreeShipping"><i data-feather="shopping-cart"></i> <span>Free Shipping</span></li>
                <!-- <li>
                  <i data-feather="dollar-sign"></i>
                  <span>EMI options available</span>
                </li> -->
              </ul>
              <hr />
              <div class="d-flex flex-column flex-sm-row pt-1">
                <a
                  *ngIf="selectedProduct.isInCart !== true"
                  href="javascript:void(0)"
                  class="btn btn-primary btn-cart mr-0 mr-sm-1 mb-1 mb-sm-0"
                  (click)="addToCart(selectedProduct)"
                >
                  <i data-feather="shopping-cart" class="mr-25"></i>
                  <span class="add-to-cart">Add to cart</span>
                </a>
                <a
                  *ngIf="selectedProduct.isInCart === true"
                  routerLink="/apps/e-commerce/checkout"
                  class="btn btn-primary btn-cart mr-0 mr-sm-1 mb-1 mb-sm-0"
                  rippleEffect
                >
                  <i data-feather="shopping-cart" class="mr-25"></i>
                  <span class="add-to-cart">View in cart</span>
                </a>
                <a
                  href="javascript:void(0)"
                  (click)="toggleWishlist(selectedProduct)"
                  class="btn btn-outline-secondary btn-wishlist mr-0 mr-sm-1 mb-1 mb-sm-0"
                  rippleEffect
                >
                  <i
                    class="fa mr-50"
                    [ngClass]="selectedProduct.isInWishlist === true ? 'fa-heart text-danger' : 'fa-heart-o'"
                  ></i>
                  <span>Wishlist</span>
                </a>
                <div class="btn-group dropdown-icon-wrapper btn-share" ngbDropdown>
                  <button
                    ngbDropdownToggle
                    type="button"
                    class="btn btn-icon hide-arrow btn-outline-secondary"
                    data-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                    rippleEffect
                  >
                    <i data-feather="share-2"></i>
                  </button>
                  <div class="dropdown-menu-right" ngbDropdownMenu>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <i data-feather="facebook"></i>
                    </a>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <i data-feather="twitter"></i>
                    </a>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <i data-feather="youtube"></i>
                    </a>
                    <a ngbDropdownItem href="javascript:void(0)">
                      <i data-feather="instagram"></i>
                    </a>
                  </div>
                </div>
                
              </div>
              <div class="d-flex flex-column flex-sm-row pt-1">
                <a
                  *ngIf="role"
                  routerLink="/apps/e-commerce/edit/{{selectedProduct.id}}"
                  class="btn btn-primary btn-cart mr-0 mr-sm-1 mb-1 mb-sm-0"
                  rippleEffect
                >
                  <i data-feather="edit" class="mr-25"></i>
                  <span class="add-to-cart">Edit</span>
                </a>
                <a
                  *ngIf="role"
                  class="btn btn-outline-danger ml-1"
                  rippleEffect
                  (click)="deleteProduct(selectedProduct.id)"
                >
                  <i data-feather="trash-2" class="mr-25"></i>
                  <span >Delete</span>
                </a>
              </div>
              <div class="d-flex flex-column flex-sm-row pt-1">
                <div class="col-5">
                  <img src="{{selectedProduct.qrCode}}"  style="width: 200px; height:200px" class="img-thumbnail"/>
                </div>
                <div class="col-7">
                  <div class="card-text">
                    <!-- Comment Star Rating -->
                    <div class="commentBox" *ngIf="isRating">
                      <!-- <div class="form-horizontal"> -->
                      <div class="form-group">
                        <div class="col-12">
                          <label>
                              Your rating <span style="font-weight:normal;">(1 start is bad, 5 star is good)</span>
                          </label>
                          <span *ngIf="notificationRating !== null" class="invalid-form">
                            <small class="form-text text-primary">{{notificationRating}}</small>
                          </span>
                          <div>
                            <ng-template #rate let-fill="fill">
                              <span class="star" [class.full]="fill === 100">
                                <span class="half" [style.width.%]="fill"><em class="fa fa-star text-warning"></em></span><em class="fa fa-star-o text-warning cursor"></em>
                              </span>
                            </ng-template>
                            
                            <ngb-rating [(rate)]="rating" [starTemplate]="rate" [readonly]="false" max="5"></ngb-rating>
                            <!-- {{rating}} -->
                          </div>
                        </div>
                      </div>
                      <div class="form-group">
                          <div class="col-12">
                              <textarea name="Comment" id="Comment" required rows="5" style="width:100%;" class="form-control"></textarea>
                          </div>
                      </div>
                      <div class="form-group">
                          <div class="col-12" >
                              <input type="submit" id="rating" name="rating" value="Save" class="btn btn-primary" (click)="SaveRating(selectedProduct.id)" style="float: right" />
                          </div>
                      <!-- </div> -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
            </div>
          </div>
        </div>
        <!-- Product Details ends -->

        
        <!-- Item features starts -->
        <div class="item-features">
          <div class="row text-center">
            <div class="col-12 col-md-4 mb-4 mb-md-0">
              <div class="w-75 mx-auto">
                <i data-feather="award"></i>
                <h4 class="mt-2 mb-1">100% Original</h4>
                <p class="card-text">Chocolate bar candy canes ice cream toffee. Croissant pie cookie halvah.</p>
              </div>
            </div>
            <div class="col-12 col-md-4 mb-4 mb-md-0">
              <div class="w-75 mx-auto">
                <i data-feather="clock"></i>
                <h4 class="mt-2 mb-1">10 Day Replacement</h4>
                <p class="card-text">Marshmallow biscuit donut drag√©e fruitcake. Jujubes wafer cupcake.</p>
              </div>
            </div>
            <div class="col-12 col-md-4 mb-4 mb-md-0">
              <div class="w-75 mx-auto">
                <i data-feather="shield"></i>
                <h4 class="mt-2 mb-1">1 Year Warranty</h4>
                <p class="card-text">Cotton candy gingerbread cake I love sugar plum I love sweet croissant.</p>
              </div>
            </div>
          </div>
        </div>
        <!-- Item features ends -->

        <!-- Related Products starts -->
        <div class="card-body">
          <div class="mt-4 mb-2 text-center">
            <h4>Related Products</h4>
            <p class="card-text">People also search for this items</p>
          </div>
          <div class="swiper-responsive-breakpoints swiper-container px-4 py-2" [swiper]="swiperResponsive">
            <div class="swiper-wrapper mb-2">
              <div class="swiper-slide" *ngFor="let relatedProduct of relatedProducts">
                <a href="javascript:void(0)">
                  <div class="item-heading">
                    <h5 class="text-truncate mb-0">{{ relatedProduct.name }}</h5>
                    <small class="text-body">by {{ relatedProduct.brand }}</small>
                  </div>
                  <div class="img-container mx-auto py-75">
                    <img [src]="relatedProduct.image" class="img-fluid" alt="image" />
                  </div>
                  <div class="item-meta">
                    <div class="rating rating-sm">
                      <ngb-rating [rate]="relatedProduct.rating" [readonly]="true" [max]="5" class="outline-none">
                        <ng-template let-fill="fill" let-index="index"
                          ><span class="fa fa-star-o mr-25" [class.fa-star]="fill === 100"></span
                        ></ng-template>
                      </ngb-rating>
                    </div>
                    <p class="card-text text-primary mb-0">${{ relatedProduct.price }}</p>
                  </div>
                </a>
              </div>
            </div>
            <!-- Add Arrows -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
          </div>
        </div>
        <!-- Related Products ends -->
      </div>
    </section>
    <!-- app e-commerce details end -->
  </div>
</div>
