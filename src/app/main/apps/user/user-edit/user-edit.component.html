<div class="content-wrapper">
  <div class="content-body">
    <!-- users edit start -->
    <section class="app-user-edit">
      <!-- <ng-container *ngFor="let row of rows"> -->
        <!-- <div class="card" *ngIf="row.id == urlLastValue"> -->
          <div class="card-body">
            <ul ngbNav #nav="ngbNav" class="nav nav-pills">
              <li ngbNavItem>
                <!-- <a ngbNavLink class="d-flex align-items-center"
                  >
                  <i data-feather="user" class="mr-sm-50"></i><span class="d-none d-sm-block">Account</span>
                  </a
                > -->
                <ng-template ngbNavContent>
                  <!-- Account Tab starts -->
                  <div class="tab-pane active" id="account" aria-labelledby="account-tab" role="tabpanel">
                    <!-- users edit media object start -->
                    <div class="media mb-2">
                      <!-- <img
                      class="user-avatar users-avatar-shadow rounded mr-2 my-25 cursor-pointer"
                      [src]="rows.avatar"
                      height="90"
                      width="90"
                      alt="User avatar"
                    /> -->
                      <div *ngIf="rows.avatar.length > 0; else customAvatar">
                        <img
                          class="user-avatar users-avatar-shadow rounded mr-2 my-25 cursor-pointer"
                          [src]="rows.avatar"
                          height="150"
                          width="150"
                          alt="User avatar"
                        />
                      </div>
                      <ng-template #customAvatar>
                        <div
                          class="mr-1 ml-0"
                          [ngClass]="{
                            'bg-light-success': rows.status == 'Active',
                            'bg-light-secondary': rows.status == 'Inactive'
                          }"
                        >
                          <div class="rounded p-3">{{ rows.userName | initials }}</div>

                        </div>
                      </ng-template>
                      <div class="media-body mt-50">
                        <h4>{{ rows.userName }}</h4>
                        <div class="col-12 d-flex mt-1 px-0">
                          <label class="btn btn-primary mr-75 mb-0" for="change-picture">
                            <span class="d-none d-sm-block">Choose file</span>
                            <input
                              class="form-control"
                              type="file"
                              id="change-picture"
                              (change)="onSelectFileAvatar($event)"
                              hidden
                              accept="image/png, image/jpeg, image/jpg"
                            />
                            <span class="d-block d-sm-none">
                              <i class="mr-0" data-feather="edit"></i>
                            </span>
                          </label>
                          <button class="btn btn-outline-secondary d-none d-sm-block"  (click)="onUploadAvatar()" rippleEffect>Upload</button>
                          <button class="btn btn-outline-secondary d-block d-sm-none">
                            <i class="mr-0" data-feather="trash-2"></i>
                          </button>
                        </div>
                        <br>

                        <ngb-alert type={{typeAlertUpload}} [dismissible]="false">
                          <div class="alert-body">
                            <p>{{ messageUpload }}</p>
                          </div>
                        </ngb-alert>
                      </div>
                    </div>
                    <!-- users edit media object ends -->
                    <!-- users edit account form start -->
        <!-- <form class="auth-register-form mt-2" (ngSubmit)="onSubmit()" #authForm="ngForm"> -->

                    <form class="form-validate"
                    [formGroup]="editUserForm" (ngSubmit)="editUser()"
                    >
                      <div class="row">
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="name">Lastname</label>
                            <input
                              type="text"
                              class="form-control"
                              placeholder="Name"
                              [(ngModel)]="rows.lastName"
                              name="lastName"
                              id="lastName"
                              formControlName="lastname"
                            />
                          </div>
                          <div *ngIf="!lastName?.valid && (lastName?.dirty
                          || lastName?.touched)"
                            class="alert">
                          <div [hidden]="!lastName.errors?.required">  <p style="color: red">Last name is required</p></div>
                          <!-- <div [hidden]="!lastName.errors?.minlength">  <p style="color: red">Minleng is 5</p></div> -->
                        </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="firstName">Firstname</label>
                            <input
                              type="text"
                              class="form-control"
                              placeholder="Firstname"
                              [(ngModel)]="rows.firstName"
                              name="firstName"
                              id="firstName"
                              formControlName="firstname"
                            />
                          </div>
                          <div *ngIf="!firstName?.valid && (firstName?.dirty
                          || firstName?.touched)"
                            class="alert">
                          <div [hidden]="!firstName.errors?.required"><p style="color: red">First name is required</p></div>
                        </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="phoneNumber">Phone</label>
                            <input
                              type="phoneNumber"
                              class="form-control"
                              placeholder="Phone number"
                              [(ngModel)]="rows.phoneNumber"
                              name="phoneNumber"
                              id="phoneNumber"
                              formControlName="phonenumber"
                              pattern="[0-9 ]{10}"
                            />
                          </div>
                          <div *ngIf="!phoneNumber?.valid && (phoneNumber?.dirty
                          || phoneNumber?.touched)"
                            class="alert">
                          <div [hidden]="!phoneNumber.errors?.required"><p style="color: red">Phone number is required</p></div>
                          <div [hidden]="!phoneNumber.errors?.pattern"><p style="color: red">Invalid phone number</p></div>
                        </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="email">Email</label>
                            <input
                              type="email"
                              class="form-control"
                              placeholder="Email"
                              [(ngModel)]="rows.email"
                              name="email"
                              id="email"
                              formControlName="email"
                              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
                            />
                          </div>
                          <div *ngIf="!email?.valid && (email?.dirty
                          || email?.touched)"
                            class="alert">
                          <div [hidden]="!email.errors?.required"><p style="color: red">Email is required</p></div>
                          <div [hidden]="!email.errors?.pattern"><p style="color: red">Invalid email</p></div>
                        </div>
                        </div>

                        <!-- <div class="col-md-4">
                          <div class="form-group">
                            <label for="role">Role</label>
                            <select class="form-control" formControlName="role" name="role" id="role">
                              <option>Master</option>
                              <option>User</option>
                              <option>Mod</option>
                            </select>
                          </div>
                        </div> -->

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="role">Role</label>
                            <select class="form-control"  [attr.disabled]="currentDisabled ? currentDisabled : null"  formControlName="role"  [(ngModel)]="selectedRole" (ngModelChange)='onChangeRole($event)' >
                              <option *ngFor="let n of listRole" [value]="n.role">{{n.role}}</option>
                            </select>
                          </div>
                        </div>

                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="status">Status</label>
                            <select class="form-control" [attr.disabled]="currentDisabled ? currentDisabled : null"  formControlName="status"  [(ngModel)]="selectedStatus" (ngModelChange)='onChangeStatus($event)'>
                              <option *ngFor="let n of listStatus" [value]="n.status">{{n.status}}</option>
                            </select>
                          </div>
                        </div>

                        <ngb-alert type={{typealert}} [dismissible]="false">
                          <div class="alert-body">
                            <p>{{ message }}</p>
                          </div>
                        </ngb-alert>

                        <div class="col-12 d-flex flex-sm-row flex-column mt-2">
                          <button type="submit" class="btn btn-primary mb-1 mb-sm-0 mr-0 mr-sm-1" rippleEffect>
                            Save Changes
                          </button>
                          <button type="reset" class="btn btn-outline-secondary" rippleEffect>
                            <a routerLink="/apps/user/user-list" class="font-medium-1 d-block"
                            >Cancel</a
                          >
                          </button>

                        </div>
                      </div>
                    </form>



                    <!-- users edit account form ends -->
                  </div>
                  <!-- Account Tab ends -->
                </ng-template>
              </li>
            </ul>
            <div [ngbNavOutlet]="nav" class="mt-2"></div>
          </div>
        <!-- </div> -->
      <!-- </ng-container> -->
    </section>
    <!-- users edit ends -->
  </div>

</div>

